<html>
	<head>
		<title>Ex1 Yours</title>
		<script>
		const x = [
			{
				Name: "Alice",
				Score: 100
			},
			{
				Name: "Bob",
				Score: 50
			},
			{
				Name: "Charlie",
				Score: 65
			},
			{
				Name: "Dan",
				Score: 25
			},
			{
				Name: "Eve",
				Score: 100
			}
		];
		
		const classValues = {
			"all": 0,
			"2:2": 50,
			"2:1": 60,
			"1": 70
		};

		const renderTable = () => {
			const tbody = document.getElementById("student-table").getElementsByTagName("tbody")[0];
			const sort = document.getElementById("sort").value;
			const $class = document.getElementById("class").value;

			tbody.innerHTML = "";

			const tableRows = x.map((x, index) => {
                x.index = index
                return x
            }).filter(x => {
				return x.Score > classValues[$class];
			}).sort(function(a,b) { 
				switch (sort) {
					case 'ascending-name': 
						return a.Name.localeCompare(b.Name);
					case 'descending-name':
						return - a.Name.localeCompare(b.Name);
					case 'ascending-score':
						return a.Score - b.Score;
					case 'descending-score':
						return b.Score - a.Score;
				}
			}).map(x => {
                const selectorElement = document.createElement("td");
                selectorElement.innerHTML = x.index + "<input type='radio' name='X'/>"
            
				const nameElement = document.createElement("td");
				nameElement.innerHTML = x.Name;

				const scoreElement = document.createElement("td");
				scoreElement.innerHTML = x.Score;
				
				const tableRow = document.createElement("tr");
                tableRow.appendChild(selectorElement);
				tableRow.appendChild(nameElement);
				tableRow.appendChild(scoreElement);

				return tableRow;
			})

			tableRows.forEach(x => tbody.appendChild(x));
		}
		
        const replaceClicked = () =>
        {
            alert("Replace!")
        }
        
		window.onload = () => {
			renderTable("ascending-name", "all");

			const sort = document.getElementById("sort")
			sort.addEventListener('change', (e) => renderTable())

			const $class = document.getElementById("class")
			$class.addEventListener('change', (e) => renderTable())
            
            const replace = document.getElementById("replace")
            replace.addEventListener('click', (e) => replaceClicked())
		}

		</script>
	</head>
	<body>
		<select name="sort" id="sort">
			<optgroup label="Score">
				<option value="ascending-score">Ascending</option>
				<option value="descending-score">Descending</option>
			</optgroup>
			<optgroup label="Name">
				<option value="ascending-name">Ascending</option>
				<option value="descending-name">Descending</option>
			</optgroup>
		</select>
		<select name="class" id="class">
			<option value="all">All</option>
			<option value="2:2">2:2 or above</option>
			<option value="2:1">2:1 or above</option>
			<option value="1">1st</option>
		</select>
        <br>
        <input id="name" />
        <input id="score"/>
        <button type="button" name="replace" id="replace">Replace</button>
		<table id="student-table">
			<thead><tr><th>Select</th><th>Name</th><th>Score</th></tr></thead>
			<tbody></tbody>
		</table>
	</body>
</html>